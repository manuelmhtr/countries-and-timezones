{"version":3,"file":"index.esm.js","sources":["../src/build-country.js","../src/build-timezone.js","../src/index.js"],"sourcesContent":["let timezonesMap;\n\nfunction buildCountry(data, id, idISO3) {\n  const name = data.countries[id];\n  if (!name) return null;\n\n  const tzMap = getTimezonesMap(data);\n  const timezones = tzMap[id] || [];\n\n  return {\n    id,\n    idISO3,\n    name,\n    timezones\n  };\n}\n\nfunction getTimezonesMap(data) {\n  if (!timezonesMap) timezonesMap = buildTimezonesMap(data);\n  return timezonesMap;\n};\n\nfunction buildTimezonesMap(data) {\n  return Object.keys(data.timezones).reduce((result, id) => {\n    const tz = data.timezones[id];\n    const { c, a } = tz;\n    const aliasTz = data.timezones[a] || {};\n    const country = c || aliasTz.c;\n\n    if (!country) return result;\n\n    if (!result[country]) result[country] = [];\n    result[country].push(id);\n\n    return result;\n  }, {});\n}\n\nmodule.exports = buildCountry;\n","function buildTimezone(data, name) {\n  const timezone = data.timezones[name];\n  if (!timezone) return null;\n\n  const {a: aliasOf = null} = timezone;\n  const aliasTz = aliasOf ? data.timezones[aliasOf] : {};\n  const tz = {\n    ...aliasTz,\n    ...data.timezones[name]\n  };\n\n  const country = tz.c || null;\n  const utcOffset = tz.u;\n  const dstOffset = Number.isInteger(tz.d) ? tz.d : utcOffset;\n\n  return {\n    name,\n    country,\n    utcOffset,\n    utcOffsetStr: getOffsetStr(utcOffset),\n    dstOffset,\n    dstOffsetStr: getOffsetStr(dstOffset),\n    aliasOf\n  };\n}\n\nfunction getOffsetStr(offset) {\n  const hours = Math.floor(offset / 60);\n  const min = offset % 60;\n  const sign = offset < 0 ? '-' : '+';\n\n  return `${sign}${getNumStr(hours)}:${getNumStr(min)}`;\n}\n\nfunction getNumStr(input) {\n  const num = Math.abs(input);\n  const prefix = num < 10 ? '0' : '';\n  return `${prefix}${num}`;\n}\n\nmodule.exports = buildTimezone;\n","const data = require('./data.json');\nconst dataIso2ToIso3 = require('./data-map-iso2-to-iso3.json');\nconst buildCountry = require('./build-country');\nconst buildTimezone = require('./build-timezone');\nconst totalCountries = Object.keys(data.countries).length;\nconst totalTimezones = Object.keys(data.timezones).length;\nconst countries = {};\nconst timezones = {};\nlet memoizedCountries = 0;\nlet memoizedTimezones = 0;\n\nfunction getAllCountries() {\n  if (totalCountries !== memoizedCountries) Object.keys(data.countries).forEach(getCountry);\n  return { ...countries };\n}\n\nfunction getAllTimezones() {\n  if (totalTimezones !== memoizedTimezones) Object.keys(data.timezones).forEach(getTimezone);\n  return { ...timezones };\n}\n\nfunction getCountry(id) {\n  const idISO3 = dataIso2ToIso3[id]\n  if (!countries[id]) {\n    memoizeCountry(buildCountry(data, id, idISO3));\n  }\n  return countries[id] ? { idISO3, ...countries[id] } : null;\n}\n\nfunction memoizeCountry(country) {\n  if (!country) return;\n  countries[country.id] = country;\n  memoizedCountries = Object.keys(countries).length;\n}\n\nfunction getTimezone(name) {\n  if (!timezones[name]) memoizeTimezone(buildTimezone(data, name));\n  return timezones[name] ? { ...timezones[name] } : null;\n}\n\nfunction memoizeTimezone(timezone) {\n  if (!timezone) return;\n  timezones[timezone.name] = timezone;\n  memoizedTimezones = Object.keys(timezone).length;\n}\n\nfunction getCountryForTimezone(tzName) {\n  const timezone = getTimezone(tzName) || {};\n  const country = timezone.country;\n  return country ? getCountry(country) : null;\n}\n\nfunction getTimezonesForCountry(countryId) {\n  const country = getCountry(countryId);\n  if (!country) return null;\n  const { timezones = [] } = country;\n  return timezones.map(getTimezone);\n}\n\nmodule.exports = {\n  getAllCountries,\n  getAllTimezones,\n  getCountry,\n  getTimezone,\n  getCountryForTimezone,\n  getTimezonesForCountry\n};\n"],"names":["timezonesMap","buildCountry","data","id","idISO3","name","countries","timezones","getTimezonesMap","buildTimezonesMap","Object","keys","reduce","result","tz","c","a","aliasTz","country","push","buildTimezone","timezone","aliasOf","utcOffset","u","dstOffset","Number","isInteger","d","utcOffsetStr","getOffsetStr","dstOffsetStr","offset","hours","Math","floor","min","getNumStr","input","num","abs","totalCountries","length","totalTimezones","memoizedCountries","memoizedTimezones","getAllCountries","forEach","getCountry","getAllTimezones","getTimezone","dataIso2ToIso3","memoizeCountry","memoizeTimezone","getCountryForTimezone","tzName","getTimezonesForCountry","countryId","map"],"mappings":"6uBAAIA,s95BAEJ,SAASC,aAAaC,EAAMC,EAAIC,OACxBC,EAAOH,EAAKI,UAAUH,UACvBE,EAKE,CACLF,GAAAA,EACAC,OAAAA,EACAC,KAAAA,EACAE,UAPYC,gBAAgBN,GACNC,IAAO,IAHb,KAapB,SAASK,gBAAgBN,UACJF,aAAdA,cAA6BS,kBAAkBP,GAItD,SAASO,kBAAkBP,UAClBQ,OAAOC,KAAKT,EAAKK,WAAWK,OAAO,SAACC,EAAQV,OAC3CW,EAAKZ,EAAKK,UAAUJ,GAClBY,EAASD,EAATC,EAAGC,EAAMF,EAANE,EACLC,EAAUf,EAAKK,UAAUS,IAAM,GAC/BE,EAAUH,GAAKE,EAAQF,SAExBG,IAEAL,EAAOK,KAAUL,EAAOK,GAAW,IACxCL,EAAOK,GAASC,KAAKhB,IAEdU,GACN,IAGL,mBAAiBZ,aCtCjB,SAASmB,cAAclB,EAAMG,OACrBgB,EAAWnB,EAAKK,UAAUF,OAC3BgB,EAAU,OAAO,WAEMA,EAArBL,EAAGM,aAAU,OAEdR,mCADUQ,EAAUpB,EAAKK,UAAUe,GAAW,IAG/CpB,EAAKK,UAAUF,IAGda,EAAUJ,EAAGC,GAAK,KAClBQ,EAAYT,EAAGU,EACfC,EAAYC,OAAOC,UAAUb,EAAGc,GAAKd,EAAGc,EAAIL,QAE3C,CACLlB,KAAAA,EACAa,QAAAA,EACAK,UAAAA,EACAM,aAAcC,aAAaP,GAC3BE,UAAAA,EACAM,aAAcD,aAAaL,GAC3BH,QAAAA,GAIJ,SAASQ,aAAaE,OACdC,EAAQC,KAAKC,MAAMH,EAAS,IAC5BI,EAAMJ,EAAS,mBACRA,EAAS,EAAI,IAAM,YAEfK,UAAUJ,eAAUI,UAAUD,IAGjD,SAASC,UAAUC,GACXC,EAAML,KAAKM,IAAIF,mBACNC,EAAM,GAAK,IAAM,WACbA,GAGrB,oBAAiBnB,cCpCXqB,eAAiB/B,OAAOC,KAAKT,KAAKI,WAAWoC,OAC7CC,eAAiBjC,OAAOC,KAAKT,KAAKK,WAAWmC,OAC7CpC,UAAY,GACZC,UAAY,GACdqC,kBAAoB,EACpBC,kBAAoB,EAExB,SAASC,yBACHL,iBAAmBG,mBAAmBlC,OAAOC,KAAKT,KAAKI,WAAWyC,QAAQC,8BAClE1C,WAGd,SAAS2C,yBACHN,iBAAmBE,mBAAmBnC,OAAOC,KAAKT,KAAKK,WAAWwC,QAAQG,+BAClE3C,WAGd,SAASyC,WAAW7C,OACZC,EAAS+C,eAAehD,UACzBG,UAAUH,IACbiD,eAAenD,eAAaC,KAAMC,EAAIC,IAEjCE,UAAUH,mBAAQC,OAAAA,GAAWE,UAAUH,IAAQ,KAGxD,SAASiD,eAAelC,GACjBA,IACLZ,UAAUY,EAAQf,IAAMe,EACxB0B,kBAAoBlC,OAAOC,KAAKL,WAAWoC,QAG7C,SAASQ,YAAY7C,UACdE,UAAUF,IAAOgD,gBAAgBjC,gBAAclB,KAAMG,IACnDE,UAAUF,qBAAaE,UAAUF,IAAU,KAGpD,SAASgD,gBAAgBhC,GAClBA,IACLd,UAAUc,EAAShB,MAAQgB,EAC3BwB,kBAAoBnC,OAAOC,KAAKU,GAAUqB,QAG5C,SAASY,sBAAsBC,GAEvBrC,GADWgC,YAAYK,IAAW,IACfrC,eAClBA,EAAU8B,WAAW9B,GAAW,KAGzC,SAASsC,uBAAuBC,GACxBvC,EAAU8B,WAAWS,OACtBvC,EAAS,OAAO,OACMA,EAAnBX,4BAAY,MACHmD,IAAIR,qBAGN,CACfJ,gBAAAA,gBACAG,gBAAAA,gBACAD,WAAAA,WACAE,YAAAA,YACAI,sBAAAA,sBACAE,uBAAAA"}